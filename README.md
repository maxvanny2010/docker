### DOCKER

## install Ubuntu

```bash
wsl --install -d Ubuntu
```

## check version

```bash
wsl -l -v
```

[example]

| NAME                | STATE     | VERSION |
|---------------------|-----------|---------|
| docker-desktop      | Running   | 2       |
| docker-desktop-data | Stopped   | 2       |
| Ubuntu              | Installed | 2       |

## run

```bash
wsl -d Ubuntu
```

# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–∫–µ—Ç—ã

```bash
sudo apt update && sudo apt upgrade -y
```

# –°—Ç–∞–≤–∏–º curl, –µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç

```bash
sudo apt install -y curl
```

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Node.js (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Ä—Å–∏—è LTS 20.x)

```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
```

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js

```bash
sudo apt install -y nodejs
```

# –ü—Ä–æ–≤–µ—Ä—è–µ–º

```bash
node -v
npm -v
```

## docker

```bash
 docker -v
sudo docker build -t result .
sudo docker run result
```

## commands

# Docker + Docker Compose (WSL + Node.js) ‚Äî –ú–∏–Ω–∏-—à–ø–∞—Ä–≥–∞–ª–∫–∞

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ Docker –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                                  | –û–ø–∏—Å–∞–Ω–∏–µ                                                     |
|------------------------------------------|--------------------------------------------------------------|
| `docker run -it -p 3000:3000 image_name` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–∞ 3000      |
| `docker run -d -p 3000:3000 image_name`  | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–µ (detached mode) —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–∞ |
| `docker ps`                              | –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã                               |
| `docker ps -a`                           | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ               |
| `docker stop <container_id>`             | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä                              |
| `docker rm <container_id>`               | –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä                              |
| `docker logs <container_id>`             | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞                                   |
| `docker exec -it <container_id> bash`    | –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)             |
| `docker build -t image_name .`           | –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ Dockerfile                                  |
| `docker images`                          | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã                                    |
| `docker rmi <image_id>`                  | –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑                                                |
| `docker image prune -a`                  | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ–±—Ä–∞–∑—ã                                           |
| `sudo docker images`                     | grep userHub                                                 |  –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–∑—ã –≤ —Ö–∞–±–µ                                           |
| `docker pull image_name`                 | –°–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ Docker Hub                                  |
| `docker push image_name`                 | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑ –≤ Docker Hub                                 |
| `docker stop $(docker ps -q)`            | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã                                    |
| `docker system prune -a --volumes`       | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã, —Ç–æ–º–∞, —Å–µ—Ç–∏               |

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ Docker Compose –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                              | –û–ø–∏—Å–∞–Ω–∏–µ                                                 |
|--------------------------------------|----------------------------------------------------------|
| `docker-compose up`                  | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑ `docker-compose.yml`             |
| `docker-compose up -d`               | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–µ (detached mode)              |
| `docker-compose down`                | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏ –∏ —Ç–æ–º–∞ Compose |
| `docker-compose ps`                  | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Compose                      |
| `docker-compose logs`                | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ Compose                    |
| `docker-compose build`               | –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ Compose                     |
| `docker-compose stop`                | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è                       |
| `docker-compose restart`             | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã                                 |
| `docker-compose exec <service> bash` | –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞                    |

---

## üîπ –°–æ–≤–µ—Ç—ã –¥–ª—è Node.js + WSL

1. **–ü–æ—Ä—Ç –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**:

```bash
   docker run -p 3000:3000 image_name
   docker-compose up -d
```

## üîπ –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏

```bash
docker run -it -p 3000:3000 -v /mnt/c/projects/university/docker:/app -w /app image_name
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –ª–æ–≥–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º:

```bash
docker run -it -p 3000:3000 image_name
docker-compose up
docker-compose exec <service> bash
```

## Dockerfile

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Node.js LTS –æ–±—Ä–∞–∑
FROM node:20

# –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º package.json –∏ package-lock.json (–µ—Å–ª–∏ –µ—Å—Ç—å)
COPY package*.json ./

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN npm install

# –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY . .

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç 3000
EXPOSE 3000

# –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
CMD ["node", "index.js"]

```

## docker-compose.yml

```bash
version: "3.9"

services:
  node-app:
    build: .
    ports:
      - "3000:3000"   # –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –Ω–∞ localhost
    volumes:
      - .:/app        # —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ —Å—Ä–∞–∑—É –æ—Ç—Ä–∞–∂–∞–ª–∏—Å—å
    stdin_open: true   # –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
    tty: true
    depens_on: some_service

```

## –ó–∞–ø—É—Å–∫

```bash
docker-compose up -d // –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–µ
docker-compose logs -f // docker-compose logs -f
docker-compose down // docker-compose down
```

## –£–¥–∞–ª–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –æ–±—Ä–∞–∑–æ–≤

```bash
docker images
```

–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã —Å IMAGE ID –∏ REPOSITORY.

2Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤ (–±–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

```bash
docker image prune -a
```

–û–ø—Ü–∏—è -a ‚Üí —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –æ–±—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
–ü–æ—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è y/n.
3Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –∫ –Ω–∏–º –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–Ω–∞—á–∞–ª–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker stop $(docker ps -q)
docker rm $(docker ps -a -q)
```

–ü–æ—Ç–æ–º —É–¥–∞–ª—è–µ–º –≤—Å–µ –æ–±—Ä–∞–∑—ã:

```bash
docker rmi $(docker images -q)
docker images -q \‚Üí –≤—ã–¥–∞—ë—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö IMAGE ID.
docker rmi —É–¥–∞–ª—è–µ—Ç –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö.
```

4Ô∏è‚É£ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Ç–æ–º–∞, –æ–±—Ä–∞–∑—ã, —Å–µ—Ç–∏)

```bash
docker system prune -a --volumes
```

# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## 1Ô∏è‚É£ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
project/
‚îú‚îÄ src/
‚îú‚îÄ Dockerfile
‚îú‚îÄ docker-compose.dev.yml # —Å–æ–¥–µ—Ä–∂–∏—Ç build –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ docker-compose.prod.yml # —Ç–æ–ª—å–∫–æ image –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ / –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îú‚îÄ .env

---

### 2Ô∏è‚É£ docker-compose.dev.yml (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```yaml
services:
  result:
    build: .
    image: mailtime2010/result
    ports:
      - "3000:3000"
    env_file:
      - .env
```
### 3Ô∏è‚É£ docker-compose.prod.yml (—Å–µ—Ä–≤–µ—Ä / –ø—Ä–æ–¥–∞–∫—à–µ–Ω)
```yaml
services:
  result:
    image: mailtime2010/result:abc1234
    ports:
      - "3000:3000"
    env_file:
      - .env
```
### –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å
–õ–æ–∫–∞–ª—å–Ω–æ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞)
```yaml
docker compose -f docker-compose.dev.yml up --build
```
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (prod, –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã)
```yaml
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d

```
